@page "/products/{number:double}"

@inject NavigationManager NavigationManager
@inject lek4.Components.Service.NumberService NumberService

@code {
    [Parameter]
    public double number { get; set; }

    private List<int> productNumbers;

    protected override void OnParametersSet()
    {
        NumberService.CurrentNumber = number;
        int maxProductNumber = (int)Math.Floor(number);
        productNumbers = Enumerable.Range(1, maxProductNumber).ToList();
    }

    private void GoToProduct(int productNumber)
    {
        NavigationManager.NavigateTo($"/product/{productNumber}");
    }
}

<h3 class="center-title">Products</h3>

<div class="product-grid">
    @foreach (var productNumber in productNumbers)
    {
        <div class="product product-@(productNumber)">
            <a @onclick="() => GoToProduct(productNumber)">
                <i class="fas fa-lock"></i> <!-- Hänglåsikon -->
            </a>
        </div>
    }
</div>

<style>
    .product-grid {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        justify-content: center;
    }

    .product {
        flex: 0 0 calc(25% - 10px); /* Fyra fyrkanter per rad */
        box-sizing: border-box;
        padding: 20px;
        border: 1px solid #ddd;
        text-align: center;
        cursor: pointer;
        width: 150px;
        height: 150px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

        .product a {
            text-decoration: none;
            color: inherit;
            font-size: 2em;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            width: 100%;
        }

            .product a i {
                font-size: 3em;
                transform: rotate(0deg); /* Säkra att ikonen är lodrät */
            }
</style>
