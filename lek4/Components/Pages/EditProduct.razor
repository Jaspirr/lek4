@page "/edit-product/{productNumber:int}"

@inject NavigationManager NavigationManager
@inject lek4.Components.Service.ProductService ProductService

<h3>Edit Product @productNumber</h3>

<div class="edit-product-form">
    <label for="price">Price</label>
    <input type="number" id="price" min="0" step="0.1" @bind="price" />

    <label for="day">Select Day</label>
    <select id="day" @bind="selectedDay">
        @foreach (DayOfWeek day in Enum.GetValues(typeof(DayOfWeek)))
        {
            <option value="@day">@day</option>
        }
    </select>

    <button @onclick="SaveChanges">Save Changes</button>
</div>

@code {
    [Parameter]
    public int productNumber { get; set; }

    private double price;
    private DayOfWeek selectedDay;

    protected override void OnInitialized()
    {
        // Hämta aktuellt pris och vald dag från ProductService
        price = ProductService.GetPrice(productNumber);
        selectedDay = ProductService.GetDay(productNumber);
    }

    private void SaveChanges()
    {
        // Spara pris och vald dag i ProductService
        ProductService.SetPrice(productNumber, price);
        ProductService.SetDay(productNumber, selectedDay);
        NavigationManager.NavigateTo("/change-products"); // Navigera tillbaka efter sparande
    }
}
